### 개략적 설계
- 위치 기반 서비스
  - 읽기 요청만 존재
  - qps 높음, 특히 특정 시간대의 인구 밀집 지역
  - stateless
- 사업장 서비스
  - 기본적으로 쓰기 요청
  - qps 낮음
  - 고객이 사업장 정보 조회, 특정 시간에 qps 높음
- 데이터베이스 클러스터
  - master: 쓰기
  - replica: 읽기
- 로드밸런서

### 주변 사업장 검색 알고리즘
#### 2차원 검색
- 인덱스로는 오직 한차원의 검색속도만 개선할 수 있다.

#### 균등 격자
- 지도를 작은 격자 또는 구획으로 나누는 접근법
- 데이터 분포가 고르지 않음

#### 지오해시
- 2차원의 위도 경도 데이터를 1차윈의 문자열로 변환한다.
- 비트를 하나씩 늘려가며 재귀적으로 세계를 더 작은 격자로 분할해 나간다.

#### 쿼드트리
- 격자에 담긴 내용이 기준을 만족할 때까지 2차원공간을 재귀적으로 사분면 분할
- 데이터베이스가 아닌 어플리케이션에 존재, 시작시점에 구축된다.
- 많은 메모리를 필요로 하지는 않는다.

#### 구글 S2
- 공간 채움 곡선을 사용해 1차원 인덱싱 하는 메모리 기반 솔루션

### 상세 설계
#### 데이터베이스 규모 확장
- 샤딩 적용
  - ex)사업장 id
- 지리 정보 색인 테이블
  - 같은 지오해시에 속한 사업장 id 각각을 별도 열로 저장
  - 크기가 작으므로 read 분산

#### 캐시
- 정말 필요한가?
- 키 : 지오해시, 사업장 id
- 값 : 해당격자 내 사업장 id 목록, 사업장 정보 객체





















### 개략적 설계안
- API
  - 같은 날 같은 객실에 중복예약이 발생하지 않도록 멱등 키 사용
- 데이터 모델
  - 읽기 연산이 쓰기 연산보다 높을 때 유용하고 ACID를 지원하는 관계형 데이터베이스 사용
- 아키텍처
  - msa, grpc 사용
 
### 상세 설계
#### 개선된 데이터 모델
- 고가용성을 위한 여러지역 또는 가용성 구역에 복제
- 데이터가 많아질 경우
  - 예약 이력은 아카이빙 또는 냉동 저장소 보관
  - 호텔별로 샤딩

#### 동시성 문제
- 같은 사용자가 예약버튼을 여러 번 누를 수 있다.
  - 클라이언트: 요청 전송 후 예약 버튼을 숨기거나 비활성화
  - 멱등 API: PK기반 멱등 키를 사용해 멱등 API로 설계
- 여러 사용자 몰림
  - 비관적 락
    - 쉽지만 데드락과 자원에 락이 걸림
  - 낙관적 락
    - MVCC를 활용해 버저닝 관리
    - 락을 걸지 않지만 동시성 수준이 높을 경우 하나의 성공하는 트랜잭션 빼고는 모두 롤백 반복

#### 시스템 규모 확장
- 샤딩
  - 키를 나누는 조건으로 hotel_id 사용
- 캐시
  - 레디스의 TTL과 RLU 정책 사용
  - 관계형 디비와의 데이터 일관성 유지는 중요하긴 하지만 잘 속여보자.
- 서비스 간 데이터 일관성
  - 2단계 커밋, 사가 패턴등을 활용

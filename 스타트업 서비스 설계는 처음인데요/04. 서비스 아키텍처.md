## 서비스 아키텍처
- 서비스 성격과 별개로 기본으로 구현해야 하는 요소
  - 인증, 데이터베이스, 캐시, 모니터링, 로그수집, 통계 정보 추출
### 모놀리식 아키텍처와 MSA
- 서비스를 나누는 기준
  - 팀의 경험은 어느정도인가
  - 스타트업의 서비스 초기 개발단계인가
  - 도메인이 명확하게 구분되는 서비스인가
- 서비스 운영 환경
  - 개발환경과 운영환경을 분리
- 페일오버
  - 장애가 발생한 서비스 컴포넌트의 장애를 인지하고 새로운 컴포넌트를 동작하게 하는 기술
- 인증과 인가
  - 패스워드 저장
    - 서버에서 원본 패스워드를 최소 처음 한번은 알아야 한다. (패드워드 생성 법적 규제)
    - 평문 저장
      - 절대 X
    - 복호화가 불가능한 단방향 해시 함수
      - 레인보우 테이블로 인해 깨질 수 있음
    - 단방향 해시 함수로 나온 해시값에 랜덤으로 다른값(솔트)을 추가
      - 레인보우 테이블 공격 방지
      - 같은 패스워드도 다른 해시 값을 생성
    - 키 유도 함수
      - Bcrypt, Scrypt, Argon2 ...
  - 패스워드 전달
    - HTTPS 프로토콜
    - 공개키/비밀키
  - 로그인 과정
    - 서버의 공개키로 암호화한 패스워드 전달 -> 등록된 패스워드(해시값+솔트)
    - 인증 뒤에는 난수로 된 토큰을 전달하고 해당 토큰으로 인증되었다고 가정
      - 엑세스 토큰
      - 리프레시 토큰
      - jwt
        - 필요한 모든 정보를 토큰에 담는다.
        - 헤더, 정보, 서명으로 구성
  - 데이터베이스
    - 적절한 인덱스
    - 복제지연
      - 정합성 vs 처리 성능
        - 동기
        - 비동기
    - 쓰기 부하
      - 캐시
      - 샤딩
      


# 입출력 장치
* 종류가 매우 많다.
  * 키보드, 모니터, 마우스, 스피커 등
  * 장치마다 속도, 데이터 전송 형식이 다양하기 때문에 정보를 주고받는 방식을 규격화 하기 어렵다.
* CPU와 메모리의 데이터 전송률은 높지만 입출력장치의 데이터 전송률은 낮다.

<br>

## 장치 컨트롤러
입출력 장치는 컴퓨터에 직접 연결되지 않고 장치컨트롤러라는 하드웨어를 통해 연결된다.
* 역할
  * CPU와 입출력장치 간의 통신 중개
    * 정보 규격화가 어려웠던 문제를 해결
  * 오류 검출
  * 데이터 버퍼링
    * 전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 버퍼라는 임시저장공간에 저장하여 전송률을 비슷하게 맞추는 방법
* 구조
  * 데이터 레지스터
    * CPU와 입출력장치 사이에 주고받을 데이터가 담기는 버퍼 역할
    * 최근에는 주고받는 데이터가 많을 경우 레지스터 대신 RAM을 사용하기도 한다.
  * 상태 레지스터
    * 입출력 작업을 할 준비가 되었는지, 입출력 작업이 완료되었는지, 오류는 없는지 등의 상태 정보 저장
  * 제어 레지스터
    * 입출력 장치가 수행할 내용에 대한 제어정보와 명령을 저장

<br>

## 장치 드라이버
장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램

<br>

# CPU와 장치 컨트롤러가 정보를 주고받는 방법

## 프로그램 입출력
* 프로그램 속 명령어로 입출력 장치를 제어하는 방법
* 메모리에 저장된 정보를 하드디스크에 백업하는 과정
  1. CPU는 하드디스크 컨트롤러의 제어 레지스터에 쓰기 명령을 보낸다.
  2. 하드디스크 컨트롤러는 하드디스크 상태를 확인하고 준비된 상태라면 하드디스크 컨트롤러는 상태레지스터에 준비되었다고 표시한다.
  3. CPU는 상태레지스터를 주기적으로 읽으면서 준비여부를 확인하고, 준비가 되었다면 백업할 메모리정보를 데이터 레지스터에 쓴다.

<br>

### CPU가 여러 장치컨트롤러 속 레지스터를 모두 알기는 힘들다.
#### 메모리 맵 입출력
* 메모리에 접근하기 위한 주소공간과 입출력장치에 접근하기 위한 주소공간을 하나의 주소공간으로 간주하는 방법
* CPU는 메모리의 주소들이나 장치컨트롤러의 레지스터들이나 똑같이 메모리 주소를 대하듯 하면 된다.

#### 고립형 입출력
* 메모리를 위한 주소공간과 입출력장치를 위한 주소공간을 분리하는 방법
* CPU는 메모리에 접근하는 명령어와는 다른 입출력 명령어를 사용한다.

#### 인터럽트 기반 입출력
* 장치컨트롤러가 입출력 작업을 끝낸 뒤 CPU에 인터럽트 요청 신호를 보내면 CPU는 하던일을 잠시 백업하고 인터럽트 서비스루틴을 실행한다.
* PIC : 여러 장치 컨트롤러에 연결되어 인터럽트 요청들의 우선순위를 판별한 뒤 CPU에 알려주는 장치

#### DMA 입출력
입출력장치와 메모리가 CPU를 거치지 않고 상호작용할 수 있는 입출력 방식, 직접 메모리에 접근할 수 있는 입출력 기능
1. CPU는 DMA 컨트롤러에게 입출력장치의 입출력작업을 명령한다.
2. DMA 컨트롤러는 CPU 대신 장치컨트롤러와 상호작용하며 입출력 작업을 수행한다. 필요한경우 DMA 컨트롤러는 메모리에 직접 접근한다.
3. 입출력작업이 끝나면 DMA 컨트롤러는 CPU에 인터럽트를 걸어 작업이 끝났음을 알린다.

